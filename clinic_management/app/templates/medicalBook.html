{% extends 'indexLogin.html' %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"/>
<link rel="stylesheet" href="{{ url_for('static', filename='css/setting/info.css') }}"/>
<link rel="stylesheet" href="{{ url_for('static', filename='css/medicalBook.css') }}"/>
{% endblock %}
{% block content %}
<main>
    <div class="container ">
        {% block left %}
        <div class="left">
            <a class="profile">
                <div class="handle">
                    <h4>Sổ Tay Khám Bệnh</h4>
                </div>
            </a>
            <div class="sidebar ">
                <a class="menu-item active" href="/medicalBook">
                    <span><i class="fa-solid fa-house"></i></span>
                    <h3>Hồ Sơ Cá Nhân</h3>
                </a>
                <a class="menu-item" href="/schedule">
                    <span><i class="fa-regular fa-compass"></i></span>
                    <h3>Lịch Hẹn</h3>
                </a>
                <a class="menu-item" id="messages-notification" href="/bill">
                    <span><i class="fa-solid fa-receipt"><small class="notification-count"> 6</small></i></span>
                    <h3>Hóa Đơn Thanh Toán</h3>
                </a>
                <a class="menu-item" id="theme" href="/history">
                    <span><i class="fa-solid fa-file-medical"></i></span>
                    <h3>Lịch Sử Khám Bệnh</h3>
                </a>
                <a class="menu-item" href="/indexLogin">
                    <span><i class="fa-solid fa-gear"></i></span>
                    <h3>Thoát</h3>
                </a>
            </div>
        </div>
        {% endblock %}
        <div class="middle">
            {% block middle %}
            {% if status_auth %}
            <div class="form-container">
                <h2>Thông Tin Người Dùng Đã Xác Thực</h2>
                <form>
                    <div class="form-group">
                        <label for="employee-id">Căn Cước Công Dân </label>
                        <input type="text" id="employee-id" name="employee-id" value="{{ user.user.cccd }}" readonly>
                    </div>

                    <div class="form-group">
                        <label for="full-name">Họ và Tên: </label>
                        <input type="text" id="full-name" name="full-name" value="{{ user.user.name }}" readonly>
                    </div>
                    <div class="form-group">
                        <label for="sex_user">Giới Tính: </label>
                        <input type="text" id="sex_user" name="sex_user" value="{{ user.user.sex }}" readonly>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" value="{{ user.email }}" readonly>
                    </div>

                    <div class="form-group">
                        <label for="phone">Số Điện Thoại: </label>
                        <input type="text" id="phone" name="phone" value="{{ user.user.phone }}" readonly>
                    </div>
                    <div class="form-group">
                        <label for="phone">Quê Quán </label>
                        <input type="text" id="address_user" name="address_user" value="{{ user.user.address }}"
                               readonly>
                    </div>
                </form>
            </div>
            {% else %}
            <div class="alert alert-danger d-flex align-items-center justify-content-between" role="alert">
                <div class="d-flex align-items-center">
                    <i class="fa-solid fa-circle-info me-2"></i>
                    <div>
                        <strong>Thông Báo Xác Thực</strong>
                        <p class="mb-0">Vui Lòng Xác Thực Thông Tin</p>
                    </div>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <div class="text-center mt-4">
                <button type="button" class="btn btn-primary btn-lg">Xác Thực</button>
            </div>
            {% endif %}
            {% endblock %}
        </div>
            <div class="form-container">
                <h2>Ảnh Đại Diện</h2>
                <div class="form-group">
                    <label class="upload-box" id="upload-label" for="profile-picture">Upload your photo</label>
                    <input type="file" id="profile-picture" name="profile-picture" accept="image/*"
                           style="display: none;">
                    <img id="avatar-preview" src="" alt="Avatar Preview">
                    <button type="button" id="change-avatar-btn">Thay đổi ảnh</button>
                </div>
                <div class="button-container">
                    <button type="submit" class="save-btn">Lưu</button>
                    <button type="button" class="back-btn">Quay Lại</button>
                </div>
            </div>
    </div>
</main>
<div class="modal fade" id="verificationModal" tabindex="-1" aria-labelledby="verificationModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="verificationModalLabel">Xác Thực Thông Tin</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="{{url_for('notebook.authenticate')}}" method="POST">
                <div class="modal-body">
                    <!-- Lựa chọn phương thức -->
                    <div class="mb-3">
                        <label class="form-label">Chọn Phương Thức:</label>
                        <select id="verificationMethod" class="form-select">
                            <option value="manual">Nhập Thông Tin Thủ Công</option>
                            <option value="image">Tải Ảnh Để Quét Mã QR</option>
                        </select>
                    </div>
                    <!-- Form Nhập Thủ Công -->
                    <div id="manualForm">
                        <div class="mb-3">
                            <label for="name" class="form-label">Họ Tên:</label>
                            <input type="text" class="form-control" id="name" name="name" placeholder="Nhập họ tên">
                        </div>
                        <div class="mb-3">
                            <label for="idCard" class="form-label">Căn Cước Công Dân:</label>
                            <input type="text" class="form-control" id="idCard" name="cccd" placeholder="Nhập số CCCD">
                        </div>

                        <div class="mb-3">
                            <label for="address" class="form-label">Số Điện Thoại :</label>
                            <input type="text" class="form-control" id="sdt" name="sdt"
                                   placeholder="Nhập Số Điện Thoại">
                        </div>
                        <div class="mb-3">
                            <label for="address" class="form-label">Giới Tính :</label>
                            <select class="form-control" id="sex" name="sex">
                                <option value="Nam">Nam</option>
                                <option value="Nữ">Nữ</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="address" class="form-label">Địa Chỉ:</label>
                            <input type="text" class="form-control" id="address" name="address"
                                   placeholder="Nhập địa chỉ">
                        </div>
                        <div class="mb-3">
                            <label for="dob" class="form-label">Ngày Sinh:</label>
                            <input type="date" class="form-control" id="dob" name="birth">
                        </div>
                    </div>

                    <!-- Form Tải Ảnh -->
                    <div id="imageForm" style="display: none;">
                        <div class="mb-3">
                            <label for="uploadImage" class="form-label">Tải Ảnh:</label>
                            <input type="file" class="form-control" id="uploadImage" accept="image/*">
                        </div>
                        <div class="alert alert-info">
                            Sau khi tải ảnh, hệ thống sẽ tự động quét mã QR và lấy thông tin.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                    <button type="submit" class="btn btn-primary">Xác Nhận</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="back_to_top">
    <span><i class="fa-solid fa-arrow-up"></i></span>
</div>
{% endblock %}
{% block javascript %}
<script src="{{ url_for('static', filename='js/medicalBook.js') }}"></script>
<script src="{{ url_for('static', filename='js/setting.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}